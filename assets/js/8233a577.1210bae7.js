"use strict";(self.webpackChunkinterview_guide=self.webpackChunkinterview_guide||[]).push([[812],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>u});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),d=p(n),u=o,k=d["".concat(l,".").concat(u)]||d[u]||m[u]||r;return n?a.createElement(k,i(i({ref:t},s),{},{components:n})):a.createElement(k,i({ref:t},s))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,i[1]=c;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7724:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>c,toc:()=>p});var a=n(7462),o=(n(7294),n(3905));const r={sidebar_position:2},i="Docker Basics",c={unversionedId:"docker/docker-commands",id:"docker/docker-commands",title:"Docker Basics",description:"- Docker is a platform which packages an application and all its dependencies together in the form of containers",source:"@site/docs/docker/docker-commands.mdx",sourceDirName:"docker",slug:"/docker/docker-commands",permalink:"/docker/docker-commands",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Docker",permalink:"/docker/"},next:{title:"Dockerfile",permalink:"/docker/dockerfile"}},l={},p=[{value:"Dockerizing application with Docker commands",id:"dockerizing-application-with-docker-commands",level:2},{value:"Pull Tomcat Image",id:"pull-tomcat-image",level:3},{value:"Verify if image got downloaded",id:"verify-if-image-got-downloaded",level:3},{value:"Running Docker Image (aka creating container)",id:"running-docker-image-aka-creating-container",level:3},{value:"Port mapping",id:"port-mapping",level:4},{value:"Verify Container creation",id:"verify-container-creation",level:4},{value:"Adding war file to Tomcat container",id:"adding-war-file-to-tomcat-container",level:3}],s={toc:p};function m(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"docker-basics"},"Docker Basics"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Docker is a platform which packages an application and all its dependencies together in the form of containers")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Docker works like Client-Server model")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Docker Daemon or Docker Runtime acts as the server & it can be communicated using Docker CLI client (Command Line Interface)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Docker image is a template & Docker container is the running instance of the image. Every Docker image will have its own Id & Every Container instance also will have its own Id assigned.  We can create any number of Container instance from single Docker image"))),(0,o.kt)("h2",{id:"dockerizing-application-with-docker-commands"},"Dockerizing application with Docker commands"),(0,o.kt)("p",null,"Lets assume we have a Spring Boot application which generates WAR file (say demo.war). In order to run WAR file, we need Tomcat server. So lets begin from Tomcat image"),(0,o.kt)("h3",{id:"pull-tomcat-image"},"Pull Tomcat Image"),(0,o.kt)("p",null,"First, we need to pull the Tomcat Java image using ",(0,o.kt)("inlineCode",{parentName:"p"},"pull")," command"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"docker pull tomcat:8.5.21-jre8-alpine\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Remember")," "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Specifying ",(0,o.kt)("strong",{parentName:"li"},"tomcat:8.5.21-jre8-alpine")," will always pull the latest image from Docker hub"),(0,o.kt)("li",{parentName:"ul"},"alpine is a Linux distribution like Ubuntu but has size of just 5 MB. Docker images built on top of alpine are usally small in size & hence downloads much faster. Hence we used alpine version of tomcat in our sample")),(0,o.kt)("h3",{id:"verify-if-image-got-downloaded"},"Verify if image got downloaded"),(0,o.kt)("p",null,"Once pull command execution is complete, run ",(0,o.kt)("inlineCode",{parentName:"p"},"docker images")," command to get list of images. You should see something like below as response"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker images\n\nREPOSITORY                      TAG                 IMAGE ID            CREATED             SIZE\ntomcat:8.5.21-jre8-alpine       latest              d991231dccdf        4 weeks ago         113MB\n")),(0,o.kt)("h3",{id:"running-docker-image-aka-creating-container"},"Running Docker Image (aka creating container)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -p 8080:8080 tomcat:8.5.21-jre8-alpine\n")),(0,o.kt)("h4",{id:"port-mapping"},"Port mapping"),(0,o.kt)("p",null,"In ",(0,o.kt)("inlineCode",{parentName:"p"},"docker run")," command, its important to do port mapping using ",(0,o.kt)("inlineCode",{parentName:"p"},"-p")," command. Reason is, Docker container runs on its own Operating system (mostly Linux flavour). So the tomcat mentioned in above run command, Tomcat will be running in 8080 port (default tomcat port) on Linux OS of the Docker container. "),(0,o.kt)("p",null,"But when we try to hit http://localhost:8080, we are hitting only 8080 port of our host machine but not the container's 8080. So its necessary to do port mapping to reach a port from outside the container "),(0,o.kt)("p",null,"To do port mapping, we have passed ",(0,o.kt)("inlineCode",{parentName:"p"},"-p 8080:8080")," as argument for the run command. Here the ",(0,o.kt)("inlineCode",{parentName:"p"},"-p")," argument represents the port to be mapped from Docker container to the Host machine. In ",(0,o.kt)("inlineCode",{parentName:"p"},"-p 8080:8080"),", 8080 before the ",(0,o.kt)("strong",{parentName:"p"},"colon (:)")," represents the port number of host system & 8080 after the ",(0,o.kt)("strong",{parentName:"p"},'colon (:)"')," represents the port in container"),(0,o.kt)("h4",{id:"verify-container-creation"},"Verify Container creation"),(0,o.kt)("p",null,"Once we execute run command, Docker creates an instance for the Docker image called as the Docker container. Every container instance will have its own id assigned called CONTAINER_ID. The CONTAINER_ID can be verified using the ",(0,o.kt)("inlineCode",{parentName:"p"},"docker ps")," command"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'docker ps\n\nCONTAINER ID        IMAGE                       COMMAND             CREATED             STATUS              PORTS                    NAMES\nb414970f84c1        tomcat:8.5.21-jre8-alpine   "catalina.sh run"   10 seconds ago      Up 9 seconds        0.0.0.0:8080->8080/tcp   nifty_aryabhata\n')),(0,o.kt)("h3",{id:"adding-war-file-to-tomcat-container"},"Adding war file to Tomcat container"),(0,o.kt)("p",null,"Now Tomcat container is up & running. Its time to copy our WAR file inside Tomcat container."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker cp demo.war <CONTAINER_ID>:/usr/local/tomcat/webapps\n")),(0,o.kt)("p",null,"For the ",(0,o.kt)("inlineCode",{parentName:"p"},"docker cp")," command, we need the <CONATINER_ID> which we can use from output of ",(0,o.kt)("inlineCode",{parentName:"p"},"docker ps")," command"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker cp demo.war b414970f84c1:/usr/local/tomcat/webapps\n")),(0,o.kt)("p",null,"Once the cp command is succesful, you can notice in logs that Tomcat container delploying demo.war automatically & start the application"),(0,o.kt)("p",null,"If you want to see the logs separately "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker logs -f <CONATAINER_ID>\n")),(0,o.kt)("p",null,"So thats all about running WAR file with Tomcat Docker Insance using Docker commands."),(0,o.kt)("p",null,"But do we need to remember all these commands & execute them one by one to get the job done ? Is there any simple alternative to create docker images ?\nYes, Fortunately, we have Dockerfile to automate these steps"))}m.isMDXComponent=!0}}]);